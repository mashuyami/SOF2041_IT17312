CREATE DATABASE EduSys
GO

USE EduSys
GO

CREATE TABLE NhanVien
(
	MaNV NVARCHAR(50) NOT NULL,
	MatKhau NVARCHAR(50) NOT NULL,
	HoTen	NVARCHAR(50) NOT NULL,
	Email NVARCHAR(50) NOT NULL,
	VaiTro BIT NOT NULL,
	TrangThai BIT NOT NULL

	PRIMARY KEY (MaNV)
)
GO

CREATE TABLE ChuyenDe
(
	MaCD NCHAR(5) NOT NULL,
	TenCD NVARCHAR(50) NOT NULL,
	HocPhi FLOAT NOT NULL,
	ThoiLuong INT NOT NULL,
	Hinh NVARCHAR(50) NOT NULL,
	MoTa NVARCHAR(225) NOT NULL

	PRIMARY KEY (MaCD)
)
GO	

CREATE TABLE KhoaHoc 
(
	MaKH INT IDENTITY(1,1) NOT NULL,
	MaCD NCHAR(5) NOT NULL,
	HocPhi FLOAT NOT NULL,
	ThoiLuong INT NOT NULL,
	NgayKG DATE NOT NULL,
	GhiChu NVARCHAR(50) NOT NULL,
	MaNV NVARCHAR(50) NOT NULL,
	NgayTao DATE NOT NULL

	PRIMARY KEY (MaKH),
	FOREIGN KEY (MaCD) REFERENCES dbo.ChuyenDe (MaCD) ON DELETE NO ACTION ON UPDATE CASCADE,
	FOREIGN KEY (MaNV) REFERENCES dbo.NhanVien (MaNV) ON DELETE NO ACTION ON UPDATE CASCADE
)
GO	

CREATE TABLE NguoiHoc
(
	MaNH NCHAR(7) NOT NULL,
	HoTen NVARCHAR(50) NOT NULL,
	NgaySinh DATE NOT NULL,
	GioiTinh BIT NOT NULL,
	DienThoai NVARCHAR(50) NOT NULL,
	Email NVARCHAR(50) NOT NULL,
	GhiChu NVARCHAR(MAX) NULL,
	MaNV NVARCHAR(50) NOT NULL,
	NgayDK DATE NOT NULL

	PRIMARY KEY (MaNH),
	FOREIGN KEY (MaNV) REFERENCES dbo.NhanVien (MaNV) ON DELETE NO ACTION ON UPDATE CASCADE
)
GO	

CREATE TABLE HocVien
(
	MaHV INT IDENTITY (1,1) NOT NULL,
	MaKH INT NOT NULL,
	MaNH NCHAR(7) NOT NULL,
	Diem FLOAT NOT NULL

	PRIMARY KEY (MaHV),
	FOREIGN KEY (MaNH) REFERENCES dbo.NguoiHoc (MaNH) ON DELETE NO ACTION ON UPDATE CASCADE,
	FOREIGN KEY (MaKH) REFERENCES dbo.KhoaHoc (MaKH) ON DELETE CASCADE
)
GO
SELECT * FROM KHOAHOC
UPDATE KHOAHOC SET MaNV = 'Admin', NgayKG = '2021-10-26' WHERE MaKH = 4
-- Insert
	
INSERT NHANVIEN VALUES ('Admin', '4297f44b13955235245b2497399d7a93', N'Admin', N'kun12112002@gmail.com', 1, 1);

INSERT CHUYENDE VALUES (N'JAV01', N'LẬP TRÌNH JAVA CƠ BẢN', 250, 90, N'GAME.PNG', N'JAV01 - LẬP TRÌNH JAVA CƠ BẢN')
INSERT CHUYENDE VALUES (N'JAV02', N'LẬP TRÌNH JAVA NÂNG CAO', 300, 90, N'HTCS.JPG', N'JAV02 - LẬP TRÌNH JAVA NÂNG CAO')
INSERT CHUYENDE VALUES (N'JAV03', N'LẬP TRÌNH MẠNG VỚI JAVA', 200, 70, N'INMA.JPG', N'JAV03 - LẬP TRÌNH MẠNG VỚI JAVA')
INSERT CHUYENDE VALUES (N'JAV04', N'LẬP TRÌNH DESKTOP VỚI SWING', 200, 70, N'LAYO.JPG', N'JAV04 - LẬP TRÌNH DESKTOP VỚI SWING')
INSERT CHUYENDE VALUES (N'PRO01', N'DỰ ÁN VỚI CÔNG NGHỆ MS.NET MVC', 300, 90, N'MOWE.PNG', N'PRO01 - DỰ ÁN VỚI CÔNG NGHỆ MS.NET MVC')
INSERT CHUYENDE VALUES (N'PRO02', N'DỰ ÁN VỚI CÔNG NGHỆ SPRING MVC', 300, 90, N'SUBJECT.PNG', N'PRO02 - DỰ ÁN VỚI CÔNG NGHỆ SPRING MVC')
INSERT CHUYENDE VALUES (N'PRO03', N'DỰ ÁN VỚI CÔNG NGHỆ SERVLET/JSP', 300, 90, N'GAME.PNG', N'PRO03 - DỰ ÁN VỚI CÔNG NGHỆ SERVLET/JSP')
INSERT CHUYENDE VALUES (N'PRO04', N'DỰ ÁN VỚI ANGULARJS & WEBAPI', 300, 90, N'HTCS.JPG', N'PRO04 - DỰ ÁN VỚI ANGULARJS & WEBAPI')
INSERT CHUYENDE VALUES (N'PRO05', N'DỰ ÁN VỚI SWING & JDBC', 300, 90, N'INMA.JPG', N'PRO05 - DỰ ÁN VỚI SWING & JDBC')
INSERT CHUYENDE VALUES (N'PRO06', N'DỰ ÁN VỚI WINDOWFORM', 300, 90, N'LAYO.JPG', N'PRO06 - DỰ ÁN VỚI WINDOWFORM')
INSERT CHUYENDE VALUES (N'RDB01', N'CƠ SỞ DỮ LIỆU SQL SERVER', 100, 50, N'MOWE.PNG', N'RDB01 - CƠ SỞ DỮ LIỆU SQL SERVER')
INSERT CHUYENDE VALUES (N'RDB02', N'LẬP TRÌNH JDBC', 150, 60, N'SUBJECT.PNG', N'RDB02 - LẬP TRÌNH JDBC')
INSERT CHUYENDE VALUES (N'RDB03', N'LẬP TRÌNH CƠ SỞ DỮ LIỆU HIBERNATE', 250, 80, N'GAME.PNG', N'RDB03 - LẬP TRÌNH CƠ SỞ DỮ LIỆU HIBERNATE')
INSERT CHUYENDE VALUES (N'SER01', N'LẬP TRÌNH WEB VỚI SERVLET/JSP', 350, 100, N'HTCS.JPG', N'SER01 - LẬP TRÌNH WEB VỚI SERVLET/JSP')
INSERT CHUYENDE VALUES (N'SER02', N'LẬP TRÌNH SPRING MVC', 400, 110, N'INMA.JPG', N'SER02 - LẬP TRÌNH SPRING MVC')
INSERT CHUYENDE VALUES (N'SER03', N'LẬP TRÌNH MS.NET MVC', 400, 110, N'LAYO.JPG', N'SER03 - LẬP TRÌNH MS.NET MVC')
INSERT CHUYENDE VALUES (N'SER04', N'XÂY DỰNG WEB API VỚI SPRING MVC & ASP.NET MVC', 200, 70, N'MOWE.PNG', N'SER04 - XÂY DỰNG WEB API VỚI SPRING MVC & ASP.NET MVC')
INSERT CHUYENDE VALUES (N'WEB01', N'THIẾT KẾ WEB VỚI HTML VÀ CSS', 200, 70, N'SUBJECT.PNG', N'WEB01 - THIẾT KẾ WEB VỚI HTML VÀ CSS')
INSERT CHUYENDE VALUES (N'WEB02', N'THIẾT KẾ WEB VỚI BOOTSTRAP', 0, 40, N'GAME.PNG', N'WEB02 - THIẾT KẾ WEB VỚI BOOTSTRAP')
INSERT CHUYENDE VALUES (N'WEB03', N'LẬP TRÌNH FRONT-END VỚI JAVASCRIPT VÀ JQUERY', 150, 60, N'HTCS.JPG', N'WEB03 - LẬP TRÌNH FRONT-END VỚI JAVASCRIPT VÀ JQUERY')
INSERT CHUYENDE VALUES (N'WEB04', N'LẬP TRÌNH ANGULARJS', 250, 80, N'INMA.JPG', N'WEB04 - LẬP TRÌNH ANGULARJS')

DBCC CHECKIDENT(KHOAHOC, RESEED, 0);
INSERT KHOAHOC VALUES (N'PRO02', 300, 90, '10/07/2019', N'PRO02 - DỰ ÁN VỚI CÔNG NGHỆ SPRING MVC', N'Admin', '10/07/2018')
INSERT KHOAHOC VALUES (N'PRO03', 300, 90, '10/07/2019', N'PRO03 - DỰ ÁN VỚI CÔNG NGHỆ SERVLET/JSP ', N'Admin', '10/07/2018')
INSERT KHOAHOC VALUES (N'RDB01', 100, 50, '10/07/2019', N'RDB01 - CƠ SỞ DỮ LIỆU SQL SERVER', N'Admin', '10/07/2018')
INSERT KHOAHOC VALUES (N'JAV01', 250, 80, '10/07/2019', N'JAV01 - LẬP TRÌNH JAVA CƠ BẢN', N'Admin', '10/07/2018')

INSERT NGUOIHOC VALUES (N'PS01638', N'LỮ HUY CƯỜNG', '11/30/2002', 1, N'0928768265', N'PS01638@FPT.EDU.VN', N'0928768265 - LỮ HUY CƯỜNG', N'Admin', '10/20/2018')
INSERT NGUOIHOC VALUES (N'PS02037', N'ĐỖ VĂN MINH', '10/01/2000', 1, N'0968095685', N'PS02037@FPT.EDU.VN', N'0968095685 - ĐỖ VĂN MINH', N'Admin', '10/10/2018')
INSERT NGUOIHOC VALUES (N'PS02771', N'NGUYỄN TẤN HIẾU', '11/01/1999', 1, N'0927594734', N'PS02771@FPT.EDU.VN', N'0927594734 - NGUYỄN TẤN HIẾU', N'Admin', '10/20/2018')
INSERT NGUOIHOC VALUES (N'PS02867', N'NGUYỄN HỮU TRÍ', '11/07/1999', 1, N'0946984711', N'PS02867@FPT.EDU.VN', N'0946984711 - NGUYỄN HỮU TRÍ', N'Admin', '10/20/2018')
INSERT NGUOIHOC VALUES (N'PS02930', N'TRẦN VĂN NAM', '11/07/1989', 1, N'0924774498', N'PS02930@FPT.EDU.VN', N'0924774498 - TRẦN VĂN NAM', N'Admin', '10/20/2018')
INSERT NGUOIHOC VALUES (N'PS02979', N'ĐOÀN TRẦN NHẬT VŨ', '09/07/1989', 1, N'0912374818', N'PS02979@FPT.EDU.VN', N'0912374818 - ĐOÀN TRẦN NHẬT VŨ', N'Admin', '10/20/2018')
INSERT NGUOIHOC VALUES (N'PS02983', N'NGUYỄN HOÀNG THIÊN PHƯỚC', '09/07/1997', 1, N'0912499836', N'PS02983@FPT.EDU.VN', N'0912499836 - NGUYỄN HOÀNG THIÊN PHƯỚC', N'Admin', '10/20/2018')
INSERT NGUOIHOC VALUES (N'PS02988', N'HỒ HỮU HẬU', '09/01/2002', 1, N'0924984876', N'PS02988@FPT.EDU.VN', N'0924984876 - HỒ HỮU HẬU', N'Admin', '10/20/2018')
INSERT NGUOIHOC VALUES (N'PS03031', N'PHAN TẤN VIỆT', '09/02/2002', 1, N'0924832716', N'PS03031@FPT.EDU.VN', N'0924832716 - PHAN TẤN VIỆT', N'Admin', '10/20/2018')
INSERT NGUOIHOC VALUES (N'PS03046', N'NGUYỄN CAO PHƯỚC','11/07/2002', 1, N'0977117727', N'PS03046@FPT.EDU.VN', N'0977117727 - NGUYỄN CAO PHƯỚC', N'Admin', '10/20/2018')
INSERT NGUOIHOC VALUES (N'PS03080', N'HUỲNH THANH HUY', '11/06/2002', 1, N'0916436052', N'PS03080@FPT.EDU.VN', N'0916436052 - HUỲNH THANH HUY', N'Admin', '10/20/2018')
INSERT NGUOIHOC VALUES (N'PS03088', N'NGUYỄN HOÀNG TRUNG', '11/06/2002', 1, N'0938101529', N'PS03088@FPT.EDU.VN', N'0938101529 - NGUYỄN HOÀNG TRUNG', N'Admin', '10/20/2018')
INSERT NGUOIHOC VALUES (N'PS03096', N'ĐOÀN HỮU KHANG', '11/06/2002', 1, N'0945196719', N'PS03096@FPT.EDU.VN', N'0945196719 - ĐOÀN HỮU KHANG', N'Admin', '10/20/2018')
INSERT NGUOIHOC VALUES (N'PS03104', N'LÊ THÀNH PHƯƠNG', '11/06/2002', 1, N'0922948096', N'PS03104@FPT.EDU.VN', N'0922948096 - LÊ THÀNH PHƯƠNG', N'Admin', '10/20/2018')
INSERT NGUOIHOC VALUES (N'PS03130', N'ĐẶNG BẢO VIỆT', '10/06/2002', 1, N'0917749344', N'PS03130@FPT.EDU.VN', N'0917749344 - ĐẶNG BẢO VIỆT', N'Admin', '10/20/2018')
INSERT NGUOIHOC VALUES (N'PS03134', N'LÊ DUY BẢO', '12/06/2002', 1, N'0926714368', N'PS03134@FPT.EDU.VN', N'0926714368 - LÊ DUY BẢO', N'Admin', '10/20/2018')
INSERT NGUOIHOC VALUES (N'PS03172', N'NGUYỄN ANH TUẤN', '12/06/2002', 1, N'0920020472', N'PS03172@FPT.EDU.VN', N'0920020472 - NGUYỄN ANH TUẤN', N'Admin', '10/20/2018')
INSERT NGUOIHOC VALUES (N'PS03202', N'PHAN QUỐC QUI', '12/06/2002', 1, N'0930649274', N'PS03202@FPT.EDU.VN', N'0930649274 - PHAN QUỐC QUI', N'Admin', '10/20/2018')
INSERT NGUOIHOC VALUES (N'PS03203', N'ĐẶNG LÊ QUANG VINH', '03/06/2002', 1, N'0920197355', N'PS03203@FPT.EDU.VN', N'0920197355 - ĐẶNG LÊ QUANG VINH', N'Admin', '10/20/2018')
INSERT NGUOIHOC VALUES (N'PS03205', N'NGUYỄN MINH SANG', '03/06/2002', 1, N'0967006218', N'PS03205@FPT.EDU.VN', N'0967006218 - NGUYỄN MINH SANG', N'Admin', '10/20/2018')
INSERT NGUOIHOC VALUES (N'PS03222', N'TRẦM MINH MẪN', '03/06/2002', 1, N'0911183649', N'PS03222@FPT.EDU.VN', N'0911183649 - TRẦM MINH MẪN', N'Admin', '10/20/2018')
INSERT NGUOIHOC VALUES (N'PS03230', N'NGUYỄN PHẠM MINH HÂN', '03/11/2002', 1, N'0983469892', N'PS03230@FPT.EDU.VN', N'0983469892 - NGUYỄN PHẠM MINH HÂN', N'HuyDG', '10/20/2018')
INSERT NGUOIHOC VALUES (N'PS03233', N'LƯU KIM HOÀNG DUY', '03/11/2002', 1, N'0938357735', N'PS03233@FPT.EDU.VN', N'0938357735 - LƯU KIM HOÀNG DUY', N'Admin', '10/20/2018')
INSERT NGUOIHOC VALUES (N'PS03251', N'TRẦN QUANG VŨ', '03/11/2002', 1, N'0914531913', N'PS03251@FPT.EDU.VN', N'0914531913 - TRẦN QUANG VŨ', N'Admin', '10/20/2018')
INSERT NGUOIHOC VALUES (N'PS03304', N'BÙI NGỌC THUẬN', '12/11/2002', 1, N'0999794115', N'PS03304@FPT.EDU.VN', N'0999794115 - BÙI NGỌC THUẬN', N'Admin', '10/20/2018')
INSERT NGUOIHOC VALUES (N'PS03306', N'HỒ VĂN HÀNH', '12/11/2002', 1, N'0912277868', N'PS03306@FPT.EDU.VN', N'0912277868 - HỒ VĂN HÀNH', N'Admin', '10/20/2018')
INSERT NGUOIHOC VALUES (N'PS03308', N'TRẦN VIẾT HÙNG', '12/11/2002', 1, N'0916050164', N'PS03308@FPT.EDU.VN', N'0916050164 - TRẦN VIẾT HÙNG', N'Admin', '10/20/2018')
INSERT NGUOIHOC VALUES (N'PS03325', N'NGUYỄN HOÀNG MINH ĐỨC', '04/01/2002', 1, N'0912234437', N'PS03325@FPT.EDU.VN', N'0912234437 - NGUYỄN HOÀNG MINH ĐỨC', N'Admin', '10/20/2018')
INSERT NGUOIHOC VALUES (N'PS03346', N'PHAN THANH PHONG', '04/01/2002', 1, N'0937891282', N'PS03346@FPT.EDU.VN', N'0937891282 - PHAN THANH PHONG', N'Admin', '10/20/2018')
INSERT NGUOIHOC VALUES (N'PS03383', N'TRẦN VŨ LUÂN', '04/01/2002', 1, N'0962030316', N'PS03383@FPT.EDU.VN', N'0962030316 - TRẦN VŨ LUÂN', N'Admin', '10/20/2018')
INSERT NGUOIHOC VALUES (N'PS03389', N'VŨ ĐỨC TUẤN', '05/01/2002', 1, N'0911637415', N'PS03389@FPT.EDU.VN', N'0911637415 - VŨ ĐỨC TUẤN', N'Admin', '10/20/2018')
INSERT NGUOIHOC VALUES (N'PS03410', N'TRẦN  NHẠT', '05/01/2002', 1, N'0946219377', N'PS03410@FPT.EDU.VN', N'0946219377 - TRẦN  NHẠT', N'Admin', '10/20/2018')
INSERT NGUOIHOC VALUES (N'PS03411', N'TRƯƠNG THÀNH ĐẠT', '05/01/2002', 1, N'0991509408', N'PS03411@FPT.EDU.VN', N'0991509408 - TRƯƠNG THÀNH ĐẠT', N'Admin', '10/20/2018')
INSERT NGUOIHOC VALUES (N'PS03425', N'TÔ VĂN NĂNG', '06/21/2002', 1, N'0915134551', N'PS03425@FPT.EDU.VN', N'0915134551 - TÔ VĂN NĂNG', N'Admin', '10/20/2018')
INSERT NGUOIHOC VALUES (N'PS03454', N'NGUYỄN NHẬT VĨNH', '06/21/2002', 1, N'0917886371', N'PS03454@FPT.EDU.VN', N'0917886371 - NGUYỄN NHẬT VĨNH', N'Admin', '10/20/2018')
INSERT NGUOIHOC VALUES (N'PS03472', N'NGUYỄN VĂN HUY', '06/21/2002', 1, N'0960620997', N'PS03472@FPT.EDU.VN', N'0960620997 - NGUYỄN VĂN HUY', N'Admin', '10/20/2018')
INSERT NGUOIHOC VALUES (N'PS03488', N'NGUYỄN NHƯ NGỌC', '07/20/2002', 0, N'0912880267', N'PS03488@FPT.EDU.VN', N'0912880267 - NGUYỄN NHƯ NGỌC', N'Admin', '10/20/2018')
INSERT NGUOIHOC VALUES (N'PS03530', N'PHẠM THÀNH TÂM', '07/20/2002', 1, N'0918161783', N'PS03530@FPT.EDU.VN', N'0918161783 - PHẠM THÀNH TÂM', N'Admin', '10/20/2018')
INSERT NGUOIHOC VALUES (N'PS03553', N'ĐINH TẤN CÔNG', '07/20/2002', 1, N'0918182551', N'PS03553@FPT.EDU.VN', N'0918182551 - ĐINH TẤN CÔNG', N'Admin', '10/20/2018')
INSERT NGUOIHOC VALUES (N'PS03561', N'LÊ MINH ĐIỀN', '08/14/2002', 1, N'0948199564', N'PS03561@FPT.EDU.VN', N'0948199564 - LÊ MINH ĐIỀN', N'Admin', '10/20/2018')
INSERT NGUOIHOC VALUES (N'PS03596', N'NGUYỄN THANH HIỀN', '08/14/2002', 1, N'0910545901', N'PS03596@FPT.EDU.VN', N'0910545901 - NGUYỄN THANH HIỀN', N'Admin', '10/20/2018')
INSERT NGUOIHOC VALUES (N'PS03603', N'LÊ PHẠM KIM THANH', '08/14/2002', 0, N'0924696779', N'PS03603@FPT.EDU.VN', N'0924696779 - LÊ PHẠM KIM THANH', N'Admin', '10/20/2018')
INSERT NGUOIHOC VALUES (N'PS03610', N'TRẦN ĐÌNH TRƯỜNG', '08/03/1995', 1, N'0941528106', N'PS03610@FPT.EDU.VN', N'0941528106 - TRẦN ĐÌNH TRƯỜNG', N'Admin', '10/20/2018')
INSERT NGUOIHOC VALUES (N'PS03614', N'NGUYỄN VĂN SÁU', '09/03/1995', 1, N'0940711328', N'PS03614@FPT.EDU.VN', N'0940711328 - NGUYỄN VĂN SÁU', N'Admin', '10/20/2018')
INSERT NGUOIHOC VALUES (N'PS03618', N'PHÍ ĐÌNH VIỆT HÙNG', '09/03/1995', 1, N'0939020097', N'PS03618@FPT.EDU.VN', N'0939020097 - PHÍ ĐÌNH VIỆT HÙNG', N'Admin', '10/20/2018')
INSERT NGUOIHOC VALUES (N'PS03638', N'PHẠM NHẬT MINH', '10/25/1995', 1, N'0927771672', N'PS03638@FPT.EDU.VN', N'0927771672 - PHẠM NHẬT MINH', N'Admin', '10/20/2018')
INSERT NGUOIHOC VALUES (N'PS03640', N'LƯU THANH NGỌC', '10/25/1988', 0, N'0918358164', N'PS03640@FPT.EDU.VN', N'0918358164 - LƯU THANH NGỌC', N'Admin', '10/20/2018')
INSERT NGUOIHOC VALUES (N'PS03662', N'NGUYỄN CAO NGỌC LỢI', '10/22/1988', 1, N'0930260679', N'PS03662@FPT.EDU.VN', N'0930260679 - NGUYỄN CAO NGỌC LỢI', N'Admin', '10/20/2018')
INSERT NGUOIHOC VALUES (N'PS03674', N'TRẦN TUẤN ANH', '10/22/1990', 1, N'0914082094', N'PS03674@FPT.EDU.VN', N'0914082094 - TRẦN TUẤN ANH', N'Admin', '10/20/2018')
SELECT * FROM NGUOIHOC

DBCC CHECKIDENT(HOCVIEN, RESEED, 0);
INSERT HOCVIEN VALUES (1, N'PS01638', 10)
INSERT HOCVIEN VALUES (2, N'PS02037', 8)
INSERT HOCVIEN VALUES (3, N'PS02771', 7)
INSERT HOCVIEN VALUES (4, N'PS02930', 9)
INSERT HOCVIEN VALUES (2, N'PS02983', 6)
INSERT HOCVIEN VALUES (3, N'PS02988', 3)
INSERT HOCVIEN VALUES (1, N'PS01638', 10)
INSERT HOCVIEN VALUES (3, N'PS02037', 8)
INSERT HOCVIEN VALUES (1, N'PS02771', 9)
INSERT HOCVIEN VALUES (2, N'PS02867', 7)
INSERT HOCVIEN VALUES (2, N'PS02930', 4)
INSERT HOCVIEN VALUES (1, N'PS01638', 8)
INSERT HOCVIEN VALUES (3, N'PS02037', 9)
INSERT HOCVIEN VALUES (1, N'PS02867', 3)
INSERT HOCVIEN VALUES (4, N'PS02930', 7)
INSERT HOCVIEN VALUES (2, N'PS02771', 8)
INSERT HOCVIEN VALUES (1, N'PS02979', 4)
INSERT HOCVIEN VALUES (1, N'PS02983', 6)
INSERT HOCVIEN VALUES (3, N'PS02988', 8)
INSERT HOCVIEN VALUES (2, N'PS03031', 8)
INSERT HOCVIEN VALUES (1, N'PS03046', 8)
INSERT HOCVIEN VALUES (4, N'PS03080', 9)
INSERT HOCVIEN VALUES (3, N'PS03088', 8)
INSERT HOCVIEN VALUES (2, N'PS03096', 8)
INSERT HOCVIEN VALUES (1, N'PS03104', 8)
INSERT HOCVIEN VALUES (4, N'PS03130', 10)
--------------------------------------Thủ tục-------------------------------------------
--REPORT: MANH - HOTEN -DIEM
IF OBJECT_ID ('SP_BangDiem') IS NOT NULL
DROP PROC SP_BangDiem
GO
CREATE PROC SP_BangDiem (@MAKH INT)
  AS BEGIN
	SELECT NH.MANH, NH.HOTEN, HV.DIEM FROM HOCVIEN HV JOIN NGUOIHOC NH ON NH.MANH = HV.MANH
	WHERE HV.MAKH = @MAKH
	ORDER BY HV.DIEM DESC
END

--REPORT:TENCD - SOHV - THAPNHAT - CAONHAT - TRUNGBINH
IF OBJECT_ID ('SP_ThongKeDiemChuyenDe') IS NOT NULL
DROP PROC SSP_ThongKeDiemChuyenDe
GO
CREATE PROC SP_ThongKeDiemChuyenDe
AS BEGIN
	SELECT TENCD CHUYENDE, COUNT(MAHV) SOHV,
	MIN(DIEM) THAPNHAT,
	MAX(DIEM) CAONHAT,
	AVG(DIEM) TRUNGBINH
	FROM KHOAHOC KH JOIN HOCVIEN HV ON KH.MAKH = HV.MAKH
	JOIN CHUYENDE CD ON CD.MACD = KH.MACD
	GROUP BY TENCD
END

--REPORT: TENCD - SOHV - DOANH THU - THAPNHAT - CAONHAT - TRUNGBINH
IF OBJECT_ID ('SP_ThongKeDoanhThu') IS NOT NULL
DROP PROC SP_ThongKeDoanhThu
GO
CREATE PROC SP_ThongKeDoanhThu (@YEAR INT)
AS BEGIN
	SELECT
		TENCD CHUYENDE,
		COUNT(DISTINCT KH.MAKH) SOKH,
		COUNT(HV.MAHV) SOHV,
		SUM(KH.HOCPHI) DOANHTHU,
		MIN(KH.HOCPHI) THAPNHAT,
		MAX(KH.HOCPHI) CAONHAT,
		AVG(KH.HOCPHI) TRUNGBINH
	FROM KHOAHOC KH
		JOIN HOCVIEN HV ON KH.MAKH = HV.MAKH
		JOIN CHUYENDE CD ON CD.MACD = KH.MACD
	WHERE YEAR(NGAYKG) = @YEAR
	GROUP BY TENCD
END
GO

--REPORT: NAM - SOLUONG - DAUTIEN - CUOICUNG
IF OBJECT_ID ('SP_ThongKeNguoiHoc') IS NOT NULL
DROP PROC SP_ThongKeNguoiHoc
GO
CREATE PROC SP_ThongKeNguoiHoc
AS BEGIN
	SELECT
		YEAR (NGAYDK) NAM,
		COUNT (*) SOLUONG,
		MIN (NGAYDK) DAUTIEN,
		MAX (NGAYDK) CUOICUNG
	FROM NGUOIHOC
	GROUP BY YEAR (NGAYDK)
END
GO

SELECT Email FROM NhanVien 
SELECT * FROM HocVien
UPDATE HocVien SET Diem = 10 WHERE MaHV = 2